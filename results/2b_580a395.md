## Eval with RAG

Command use:
```bash
t0 evaluate-rag data/synthetic_queries/5bb7345_gpt-4o_1000_synthetic_queries.jsonl \
  --k <k> \
  --db-choice chroma \
  --llm-provider <provider> \
  --llm-model-name <model> \
  --prompt-template-path templates/rag_evaluation_prompt.txt \
  --system-prompt-path templates/rag_evaluation_system_prompt.txt \
  --output-file <file>
```

There are 1000 items in the evaluation set.

| Embedding Method | Supporting documents retrieved | Condition skyline (p@k) | LLM | Conditions accuracy | Severity accuracy |
| - | - | - | - | - | - |
| sentence-transformers/all-mpnet-base-v2 | 10 | 0.69 | deepseek-r1 |  0.42 | 0.43 |
| sentence-transformers/all-mpnet-base-v2 | 10 | 0.69 | o3-mini | 0.47 | 0.42 |
| sentence-transformers/all-mpnet-base-v2 | 10 | 0.69 | Qwen/Qwen2.5-1.5B-Instruct | 0.26 | 0.08 |
| sentence-transformers/all-mpnet-base-v2 | 10 | 0.69 | Qwen/Qwen2.5-7B-Instruct | 0.34 | 0.27 |
| sentence-transformers/all-mpnet-base-v2 | 10 | 0.69 | Qwen/Qwen2.5-14B-Instruct | 0.35 | 0.38 |
| sentence-transformers/all-mpnet-base-v2 | 10 | 0.69 | Qwen/Qwen2.5-32B-Instruct | 0.42 | 0.41 |
| sentence-transformers/all-mpnet-base-v2 | 30 | 0.83 | deepseek-r1  | 0.44 | 0.42 |
| sentence-transformers/all-mpnet-base-v2 | 30 | 0.83 | o3-mini | 0.48 | 0.46 |
| sentence-transformers/all-mpnet-base-v2 | 30 | 0.83 | Qwen/Qwen2.5-1.5B-Instruct | 0.16 | 0.05 |
| sentence-transformers/all-mpnet-base-v2 | 30 | 0.83 | Qwen/Qwen2.5-7B-Instruct | 0.37 | 0.30 |
| sentence-transformers/all-mpnet-base-v2 | 30 | 0.83 | Qwen/Qwen2.5-14B-Instruct | 0.29 | 0.36 |
| sentence-transformers/all-mpnet-base-v2 | 30 | 0.83 | rchan26/t0-14B-test | 0.40 | 0.32 |
| sentence-transformers/all-mpnet-base-v2 | 30 | 0.83 | Qwen/Qwen2.5-32B-Instruct | 0.45 | 0.40 |

## Eval without RAG

Command use:
```
t0 evaluate-rag data/synthetic_queries/5bb7345_gpt-4o_1000_synthetic_queries.jsonl \
  --k 1 \ <-- this will be ignored
  --db-choice chroma \
  --llm-provider <provider> \
  --llm-model-name <model> \
  --prompt-template-path templates/withoutrag_evaluation_prompt.txt \
  --system-prompt-path templates/withoutrag_evaluation_system_prompt.txt \
  --output-file <file>
```
| Embedding Method | Supporting documents retrieved | Condition skyline (p@k) | LLM | Conditions accuracy | Severity accuracy |
| - | - | - | - | - | - |
| sentence-transformers/all-mpnet-base-v2 | / | / | o3-mini | 0.17* | 0.44 |
| sentence-transformers/all-mpnet-base-v2 | / | / | GPT-4o  | 0.41 | 0.46 |

* Note that the code crashed after 600 queries, but numbers should be stable (they were already after 100)
